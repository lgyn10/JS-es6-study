<div>
  <h3>async / await</h3>
  <p>Promise 어렵다구?</p>
  <p>이거 써!</p>
</div>

<script>
  async function add() {
    let prms = new Promise((resolve, reject) => {
      let num = 1;
      if (num == 2) resolve(100);
      else reject(0);
    });
    // 1. then()
    prms.then(() => {
      console.log('then 성공');
    });
    // 2. await
    // let result = await prms; // 여기에서 다음 코드를 실행하지 않고 기다림
    // console.log('await: ' + result); // 100

    // 3. 2의 개선
    try {
      let result2 = await prms;
      console.log('await 성공: ' + result);
    } catch {
      console.log('await 실패');
    }

    return 1 + 1;
  }
  // async를 function 앞에 붙이면 함수 실행 후에 Promise 오브젝트가 남는다
  // Promise를 리턴한다
  // 근데 resolve(성공) 기능 밖에 없음

  add().then((res) => {
    console.log(res);
    console.log('async 성공');
  });
</script>
